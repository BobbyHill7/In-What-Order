<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>In What Order? – Raw Manta Ray</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Montserrat:wght@500;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0e1a22;
  --panel:#132733;
  --accent:#f2b705;
  --green:#2ecc71;
  --yellow:#f1c40f;
  --red:#e74c3c;
}

*{box-sizing:border-box}

body{
  margin:0;
  background:radial-gradient(circle at top,#1c3b4a,var(--bg));
  color:#fff;
  font-family:'Montserrat',sans-serif;
}

header{
  text-align:center;
  padding:16px;
  background:linear-gradient(135deg,#1fa2ff,var(--accent));
  color:#000;
}

header h1{
  font-family:'Orbitron',sans-serif;
  margin:0;
}

.timer{
  position:sticky;
  top:0;
  background:#000;
  font-family:'Orbitron',sans-serif;
  font-size:3.2rem;
  text-align:center;
  padding:12px;
  z-index:10;
}

.layout{
  display:grid;
  grid-template-columns:260px 1fr;
  gap:16px;
  max-width:1100px;
  margin:auto;
  padding:16px;
}

.instructions{
  background:var(--panel);
  padding:14px;
  border-radius:12px;
  font-size:0.9rem;
}

.board{
  background:var(--panel);
  padding:16px;
  border-radius:16px;
}

.list{display:none}

.item{
  height:96px;
  display:flex;
  align-items:center;
  gap:14px;
  padding:10px;
  margin:6px 0;
  background:#0f2029;
  border-radius:10px;
  border:3px solid transparent;
  cursor:grab;
}

.item img{
  width:72px;
  height:72px;
  object-fit:contain;
}

.correct{border-color:var(--green);box-shadow:0 0 10px var(--green)}
.partial{border-color:var(--yellow);box-shadow:0 0 10px var(--yellow)}
.wrong{border-color:var(--red);box-shadow:0 0 10px var(--red)}

button{
  font-family:'Orbitron',sans-serif;
  padding:10px 22px;
  border:none;
  border-radius:24px;
  cursor:pointer;
  background:var(--accent);
  margin-top:10px;
}

.score{
  text-align:center;
  font-family:'Orbitron',sans-serif;
  font-size:1.6rem;
  margin-top:12px;
  display:none;
}
</style>
</head>

<body>

<header>
  <h1>In What Order?</h1>
  <h2>Raw Manta Ray</h2>
</header>

<div class="timer" id="timer">48</div>

<div class="layout">

<div class="instructions">
<strong>How to Play</strong>
<ul>
<li>Order updates from <strong>earliest → latest</strong></li>
<li>Green = exact position</li>
<li>Yellow = correct relative order</li>
<li>Red = incorrect</li>
<li>–5 seconds per incorrect submit</li>
<li>Green + Yellow both score points</li>
</ul>
</div>

<div class="board">
  <div id="list" class="list"></div>
  <button id="startBtn">START GAME</button>
  <button id="submitBtn" style="display:none;">SUBMIT</button>
  <div class="score" id="score"></div>
</div>

</div>

<script>
const correctOrder=[
  "Fossil Island","Brimstone Chest","The Mimic","Larran’s Chest",
  "Tempoross","Tombs of Amascut","The Leviathan","Killing a Manta Ray"
];

const data=[
["Fossil Island","September 2017","https://oldschool.runescape.wiki/images/Fossil_Island_logo.png?f8132"],
["Brimstone Chest","February 2019","https://oldschool.runescape.wiki/images/Brimstone_chest.png?23463"],
["The Mimic","April 2019","https://oldschool.runescape.wiki/images/thumb/The_Mimic.png/1024px-The_Mimic.png?b45f4"],
["Larran’s Chest","June 2019","https://oldschool.runescape.wiki/images/Larran%27s_big_chest.png?eb3ea"],
["Tempoross","March 2021","https://oldschool.runescape.wiki/images/Tempoross.png?12042"],
["Tombs of Amascut","August 2022","https://oldschool.runescape.wiki/images/Tombs_of_Amascut.png?f9992"],
["The Leviathan","July / August 2023","https://oldschool.runescape.wiki/images/The_Leviathan.png?d588a"],
["Killing a Manta Ray","November 2025","https://oldschool.runescape.wiki/images/Manta_ray_%28Sailing%29.png?80b30"]
];

const list=document.getElementById("list");
const timerEl=document.getElementById("timer");
const scoreEl=document.getElementById("score");

let time=48,interval,gameOver=false,dragged;

function shuffle(a){return a.sort(()=>Math.random()-0.5);}

startBtn.onclick=()=>{
  shuffle([...data]).forEach(d=>{
    const el=document.createElement("div");
    el.className="item";
    el.draggable=true;
    el.dataset.name=d[0];
    el.innerHTML=`<img src="${d[2]}"><div>${d[0]}</div>`;
    list.appendChild(el);
  });
  list.style.display="block";
  startBtn.style.display="none";
  submitBtn.style.display="inline-block";
  enableDrag();
  interval=setInterval(()=>{
    time--;
    timerEl.textContent=time;
    if(time<=0) endGame();
  },1000);
};

function enableDrag(){
  list.addEventListener("dragstart",e=>dragged=e.target);
  list.addEventListener("dragover",e=>{
    e.preventDefault();
    const target=e.target.closest(".item");
    if(!target||target===dragged)return;
    const r=target.getBoundingClientRect();
    const after=e.clientY>r.top+r.height/2;
    list.insertBefore(dragged,after?target.nextSibling:target);
  });
}

submitBtn.onclick=()=>{
  if(gameOver)return;
  let score=0;
  const items=[...list.children];
  items.forEach(el=>el.classList.remove("correct","partial","wrong"));

  items.forEach((el,i)=>{
    const ci=correctOrder.indexOf(el.dataset.name);
    if(ci===i){
      el.classList.add("correct");
      score+=12.5;
    }else{
      let ok=true;
      items.forEach((o,j)=>{
        const oi=correctOrder.indexOf(o.dataset.name);
        if((ci<oi)!==(i<j)) ok=false;
      });
      if(ok){
        el.classList.add("partial");
        score+=12.5;
      }else{
        el.classList.add("wrong");
      }
    }
  });

  time=Math.max(0,time-5);
  timerEl.textContent=time;
  score+=Math.floor(time/5);
  scoreEl.style.display="block";
  scoreEl.textContent=`Score: ${Math.min(100,Math.round(score))}`;

  if(score>=100) endGame();
};

function endGame(){
  gameOver=true;
  clearInterval(interval);
  [...list.children].forEach(i=>i.draggable=false);
  submitBtn.disabled=true;
}
</script>

</body>
</html>
